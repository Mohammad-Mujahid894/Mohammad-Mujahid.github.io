<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cosmos — 3D Stars + Shooting Cursor</title>
  <meta name="description" content="Galaxy background with 3D parallax stars, shooting stars, glitter cursor trail, and hover tilt cards." />
  <style>
    :root{
      --bg:#04060b; --fg:#eaf2ff; --muted:#9fb2d8; --glass:rgba(255,255,255,.06); --stroke:rgba(255,255,255,.12);
      --radius:18px; --shadow:0 30px 80px rgba(0,0,0,.6);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; color:var(--fg); background:radial-gradient(1200px 800px at 20% -10%, #0f1730 0%, transparent 60%), #04060b; font-family:system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; overflow-x:hidden}

    /* ===== LAYERS ===== */
    .layer{position:fixed; inset:0; pointer-events:none}
    #stars1,#stars2,#stars3{z-index:-3}
    #nebula{z-index:-2; filter:blur(40px) saturate(120%); background:
      radial-gradient(40% 40% at 15% 20%, rgba(122,162,255,.30), transparent 70%),
      radial-gradient(35% 35% at 85% 15%, rgba(79,240,176,.25), transparent 70%),
      radial-gradient(50% 50% at 60% 80%, rgba(138,122,255,.22), transparent 70%),
      radial-gradient(30% 30% at 20% 85%, rgba(255,200,120,.18), transparent 70%);
      animation: drift 24s ease-in-out infinite alternate
    }
    @keyframes drift{from{transform:translate3d(0,0,0)}to{transform:translate3d(0,-2%,0)}}

    /* ===== CONTENT ===== */
    .wrap{max-width:1080px; margin:0 auto; padding:24px}
    header{position:sticky; top:0; z-index:10; backdrop-filter:saturate(160%) blur(8px); background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,0));}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; border:1px solid var(--stroke); background:var(--glass); border-radius:calc(var(--radius) + 6px); padding:14px 18px; box-shadow:var(--shadow)}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{width:36px; height:36px; border-radius:12px; background:conic-gradient(from 180deg,#7aa2ff 0 25%, #8a7aff 25% 50%, #4ff0b0 50% 75%, #ffd28a 75% 100%)}
    .nav a{color:var(--fg); text-decoration:none; opacity:.9; font-weight:700}

    main{padding-top:24px}
    .hero{min-height:70vh; display:grid; place-items:center; text-align:center}
    .title{font-size:clamp(32px,5vw,62px); line-height:1.05; margin:0}
    .title span{background:linear-gradient(90deg,#7aa2ff,#8a7aff,#4ff0b0); -webkit-background-clip:text; background-clip:text; color:transparent}
    .sub{color:var(--muted); margin-top:10px}
    .cta{display:flex; gap:10px; justify-content:center; margin-top:18px}
    .btn{border:1px solid var(--stroke); background:linear-gradient(180deg, rgba(255,255,255,.1), rgba(255,255,255,.02)); color:var(--fg); padding:10px 14px; border-radius:14px; font-weight:800; text-decoration:none; display:inline-flex; align-items:center; gap:8px; box-shadow:var(--shadow)}

    /* Cards to feel hover tilt */
    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:18px; margin:60px 0}
    .col-6{grid-column:span 6}
    @media(max-width:900px){.col-6{grid-column:span 12}}
    .card{position:relative; border:1px solid var(--stroke); background:var(--glass); border-radius:18px; padding:22px; box-shadow:var(--shadow)}
    .tilt{transform-style:preserve-3d; will-change:transform; transition:transform 150ms ease}
    .tilt .inner{transform:translateZ(30px)}

    /* Progress bars demo */
    .skillbar{position:relative; height:12px; border-radius:999px; background:rgba(255,255,255,.08); overflow:hidden}
    .skillbar span{position:absolute; inset:0; width:0; background:linear-gradient(90deg,#7aa2ff,#4ff0b0); transition:width 1.1s cubic-bezier(.2,.8,.2,1)}

    /* Cursor glitter particles */
    .spark{position:fixed; width:6px; height:6px; border-radius:50%; pointer-events:none; background:radial-gradient(circle,#fff,rgba(255,255,255,0)); filter:drop-shadow(0 0 10px rgba(122,162,255,.9)); opacity:0; animation: fade .8s ease-out forwards}
    @keyframes fade{0%{opacity:1; transform:translate(-50%,-50%) scale(1)}100%{opacity:0; transform:translate(-50%,-50%) scale(.4)}}

    .notice{color:var(--muted); text-align:center; margin:30px 0}

    @media (prefers-reduced-motion: reduce){
      #nebula{animation:none}
    }
/* Navbar container */
header {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  padding: 10px 25px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  z-index: 100;
  width: 90%;
  max-width: 1100px;
}

/* Brand */
header .brand {
  display: flex;
  align-items: center;
  gap: 10px;
}
header .brand img {
  width: 35px; height: 35px; border-radius: 8px; object-fit: cover;
}
header .brand strong {
  color: #fff;
  font-size: 22px;   /* bigger */
  font-weight: 700;
  text-shadow: 0 0 8px rgba(122,162,255,0.6), 0 0 15px rgba(122,162,255,0.4);
}

/* Nav links in one line */
header nav {
  display: flex;
  align-items: center;
  gap: 20px;
}
header nav a {
  color: #fff;
  text-decoration: none;
  font-weight: 500;
  transition: 0.3s;
  padding: 6px 12px;
  border-radius: 10px;
}
header nav a:hover { background: rgba(255,255,255,0.1); }

/* Dropdown */
.dropdown { position: relative; }
.dropdown-content {
  position: absolute;
  top: 120%; left: 0;
  background: rgba(20,20,20,0.9);
  border-radius: 12px;
  min-width: 180px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.5);
  opacity: 0; max-height: 0;
  overflow: hidden;
  transition: all 0.35s ease-in-out;
}
    @media (max-width: 768px) {
  .dropdown-content {
    position: relative;   /* instead of absolute */
    top: 0;
    box-shadow: none;
    background: rgba(30,30,30,0.95);
    margin-left: 10px;
  }
}

.dropdown-content a {
  display: block; padding: 10px;
  color: white; text-decoration: none;
}
.dropdown-content a:hover { background: rgba(255,255,255,0.1); }
.dropdown:hover .dropdown-content {
  opacity: 1; max-height: 500px;
}

/* Hamburger (hidden on desktop) */
.hamburger {
  display: none;
  font-size: 24px;
  cursor: pointer;
  color: white;
}

/* Mobile styles */
@media (max-width: 768px) {
  .hamburger { display: block; }
  nav {
    position: absolute;
    top: 70px; left: 0; right: 0;
    flex-direction: column;
    background: rgba(20,20,20,0.9);
    border-radius: 0 0 12px 12px;
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: all 0.4s ease-in-out;
  }
  nav.show {
    max-height: 500px;
    opacity: 1;
  }
}
    /* Hero layout */
.hero-content {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 50px;
  flex-wrap: wrap;
  min-height: 80vh;
}

/* Profile picture with glowing orbits */
.profile-pic {
  position: relative;
  width: 250px;   /* bigger circle */
  height: 250px;
}
.profile-pic img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid #fff;
  box-shadow: 0 0 35px rgba(122,162,255,0.8);
  background: black;
}

/* Intro text */
.intro-text {
  text-align: left;
  margin-left: 30px;  /* pushes your text to the right */
}

.intro-text .title span {
  background: linear-gradient(90deg,#7aa2ff,#8a7aff,#4ff0b0);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  font-size: clamp(36px, 6vw, 68px);
  font-weight: 800;
}
.intro-text .sub {
  color: var(--muted);
  font-size: 18px;
  margin: 6px 0;
}

/* Scroll down arrow */
.scroll-down {
  font-size: 28px;
  margin-top: 20px;
  animation: bounce 1.5s infinite;
  color: #7aa2ff;
  cursor: pointer;
}
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(8px); }
}
  /* Container for the subtitles */
.tags {
  display: flex;
  flex-direction: column;   /* stack them */
  align-items: flex-start;  /* left aligned */
  gap: 10px;
  margin-top: 14px;
}

/* Glassy pill-style tags */
.tag {
  padding: 8px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(255, 255, 255, 0.06);
  backdrop-filter: blur(6px);
  font-size: 15px;
  font-weight: 600;
  color: var(--fg);
  box-shadow: 0 4px 20px rgba(0,0,0,0.35);
  white-space: nowrap;
}
  </style>
</head>
<body>
  <!-- ===== BACKGROUND LAYERS ===== -->
  <canvas id="stars1" class="layer" aria-hidden="true"></canvas>
  <canvas id="stars2" class="layer" aria-hidden="true"></canvas>
  <canvas id="stars3" class="layer" aria-hidden="true"></canvas>
  <div id="nebula" class="layer" aria-hidden="true"></div>

  <!-- ===== CONTENT ===== -->
<header>
  <div class="brand">
    <img src="062325.png" alt="Profile">
    <strong>Mohammad Mujahid</strong>
  </div>

  <div class="hamburger" onclick="toggleMenu()">☰</div>

  <nav id="navbar">
    <a href="#home" class="active">Home</a>
    <a href="#about">About</a>
    <a href="#experience">Experience</a>
    <a href="#skills">Skills</a>

    <div class="dropdown">
      <a href="#">More ▾</a>
      <div class="dropdown-content">
        <a href="#projects">Projects</a>
        <a href="#achievements">Achievements</a>
        <a href="#education">Education</a>
        <a href="#blogs">Blogs</a>
        <a href="#interests">Interests</a>
      </div>
    </div>

    <div class="dropdown">
      <a href="#contact">Contact ▾</a>
      <div class="dropdown-content">
        <a href="resume.pdf" target="_blank">Download Resume</a>
      </div>
    </div>
  </nav>
</header>
  <main class="wrap" id="top">
<section class="hero">
  <div class="hero-content">
    <!-- Left side - Profile Image -->
<div class="profile-pic">
  <div id="ring-scene" style="width:360px;height:360px;margin:auto;"></div>
</div>

    <!-- Right side - Name and Subtitles -->
    <div class="intro-text">
      <h1 class="title"><span>Mohammad Mujahid</span></h1>
<div class="tags">
  <span class="tag">Order to Cash Specialist</span>
  <span class="tag">ICMAI Intermediate</span>
  <span class="tag">Passionate About Data & Automation</span>
</div>
      
      <!-- Scroll down arrow -->
      <div class="scroll-down">↓</div>
    </div>
  </div>
</section>

    <section id="demo">
      <div class="grid">
        <div class="col-6">
          <div class="card tilt">
            <div class="inner">
              <h3>Hover tilt card</h3>
              <p class="sub">Move your mouse over me — I tilt in 3D. Great for project previews or testimonials.</p>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="card tilt">
            <div class="inner">
              <h3>Animated bars</h3>
              <p class="sub">Bars fill when visible. Use for Excel/Power BI/SAP proficiency.</p>
              <div style="display:grid; gap:12px; margin-top:8px">
                <div>Excel <small class="sub">85%</small></div>
                <div class="skillbar"><span style="--w:85%"></span></div>
                <div>Power BI <small class="sub">45%</small></div>
                <div class="skillbar"><span style="--w:45%"></span></div>
                <div>SAP FICO <small class="sub">25%</small></div>
                <div class="skillbar"><span style="--w:25%"></span></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <p class="notice">Tip: Replace the texts with your own content later. The visuals are already set.</p>
    </section>
  </main>

  <script>
    /* ========= Parallax starfields (3 layers for depth) ========= */
    const DPR = Math.min(2, window.devicePixelRatio || 1);
    const layers = [
      { id: 'stars1', count: 200, speed: 0.15, size: 1.0 }, // far
      { id: 'stars2', count: 140, speed: 0.35, size: 1.6 }, // mid
      { id: 'stars3', count: 90,  speed: 0.65, size: 2.2 }  // near
    ];

    function Starfield(layer){
      const cvs = document.getElementById(layer.id); const ctx = cvs.getContext('2d');
      let w, h, stars=[]; let mx=0, my=0; // parallax
      function resize(){ w = cvs.width = innerWidth * DPR; h = cvs.height = innerHeight * DPR; cvs.style.width = innerWidth+'px'; cvs.style.height = innerHeight+'px';
        stars = Array.from({length: layer.count}, ()=>({ x: Math.random()*w, y: Math.random()*h, a: Math.random()*0.7+0.2 })); }
      resize(); addEventListener('resize', resize);
      addEventListener('mousemove', (e)=>{ mx = (e.clientX/innerWidth - .5); my = (e.clientY/innerHeight - .5); });
      function draw(){ ctx.clearRect(0,0,w,h); ctx.fillStyle = '#fff';
        for(const s of stars){ const px = s.x + mx*20*layer.speed; const py = s.y + my*20*layer.speed; ctx.globalAlpha = s.a; ctx.fillRect(px, py, layer.size*DPR, layer.size*DPR); }
        requestAnimationFrame(draw); }
      draw();
      return {ctx, get size(){return {w,h}}, pushMeteor};

      function pushMeteor(x,y,vx,vy){ // gradient trail line
        const grad = ctx.createLinearGradient(x,y, x-vx*14, y-vy*14);
        grad.addColorStop(0,'rgba(255,255,255,.95)'); grad.addColorStop(1,'rgba(122,162,255,0)');
        ctx.strokeStyle = grad; ctx.lineWidth = 1.5*DPR; ctx.beginPath(); ctx.moveTo(x,y); ctx.lineTo(x-vx*14, y-vy*14); ctx.stroke();
      }
    }

    const fields = layers.map(Starfield);

    /* ========= Random shooting stars ========= */
    const meteors = [];
    function spawnMeteor(){ if(document.visibilityState !== 'visible') return; const {w,h} = fields[2].size;
      meteors.push({ x: Math.random()*w, y: -20, vx: -6*DPR, vy: 6*DPR, life: 180 }); }
    setInterval(spawnMeteor, 2200);
    function drawMeteors(){ for(let i=meteors.length-1;i>=0;i--){ const m = meteors[i]; m.x += m.vx; m.y += m.vy; m.life -= 1; fields[2].pushMeteor(m.x,m.y,m.vx,m.vy); if(m.x < -50 || m.y > fields[2].size.h+50 || m.life<=0){ meteors.splice(i,1); } }
      requestAnimationFrame(drawMeteors); }
    drawMeteors();

    /* ========= Glitter comet cursor ========= */
    const sparks=[]; let last=0; function spawnSpark(x,y){ const s=document.createElement('span'); s.className='spark'; s.style.left=x+'px'; s.style.top=y+'px'; document.body.appendChild(s); sparks.push(s); if(sparks.length>40){ const old=sparks.shift(); old.remove(); } setTimeout(()=>s.remove(), 900); }
    addEventListener('mousemove', (e)=>{ if(matchMedia('(pointer:fine)').matches) { const now=performance.now(); if(now-last>12){ spawnSpark(e.clientX, e.clientY); last=now; } } });

    /* ========= 3D Hover Tilt ========= */
    const tilts = [...document.querySelectorAll('.tilt')];
    tilts.forEach(el=>{
      el.addEventListener('mousemove', (e)=>{ const r = el.getBoundingClientRect(); const x = (e.clientX - r.left) / r.width; const y = (e.clientY - r.top) / r.height; const rx = (0.5 - y) * 10; const ry = (x - 0.5) * 10; el.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`; });
      el.addEventListener('mouseleave', ()=>{ el.style.transform = 'rotateX(0deg) rotateY(0deg)'; });
    });

    /* ========= Animate bars when visible ========= */
    const io = new IntersectionObserver((entries)=>{ entries.forEach(en=>{ if(en.isIntersecting){ en.target.querySelectorAll('.skillbar span').forEach(sp=>{ const w = getComputedStyle(sp).getPropertyValue('--w') || '0%'; requestAnimationFrame(()=> sp.style.width = w); }); } }); }, {threshold:.2});
    document.querySelectorAll('#demo').forEach(s=> io.observe(s));

    /* ========= Reduce motion toggle ========= */
    let motionReduced = false; function toggleMotion(){ motionReduced = !motionReduced; document.body.style.setProperty('animation-play-state', motionReduced ? 'paused' : 'running'); }
    window.toggleMotion = toggleMotion;
  </script>
    <script>
    function toggleMenu() {
      document.getElementById("navbar").classList.toggle("show");
    }
  </script>
  <script>
<!-- container -->
<!-- Three.js widget -->
<script type="module">
/* 3D Orbiting Rings - Interactive (Beginner-friendly)
   - Replace "your-profile.jpg" with your own image path
   - Tweak SETTINGS below to change vibe
*/

import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js";
import { OrbitControls } from "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js";

const container = document.getElementById('ring-scene');

// ========== SETTINGS ==========
const SETTINGS = {
  pic: '062325.png',   // <-- put your profile image path here
  size: 360,                 // px container (keeps it square)
  ringCount: 5,
  ringBaseRadius: 1.05,      // relative to disc size
  ringSpacing: 0.22,
  ringThickness: 0.04,
  baseSpeed: 0.0024,
  hoverSpeedMult: 3.2,
  ringHueStart: 195,         // bluish - change for different color
  backgroundColor: 0x02020a
};
// ==============================

/* Scene + Camera + Renderer */
const scene = new THREE.Scene();
scene.background = new THREE.Color(SETTINGS.backgroundColor);

const aspect = 1;
const camera = new THREE.PerspectiveCamera(45, aspect, 0.1, 50);
camera.position.set(0, 0, 3.2);

const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1.5, 2));
renderer.setSize(SETTINGS.size, SETTINGS.size);
renderer.domElement.style.borderRadius = '50%';
renderer.domElement.style.display = 'block';
container.appendChild(renderer.domElement);

/* Light: soft ambient + tiny point for spec (gives depth) */
const amb = new THREE.AmbientLight(0xffffff, 0.9);
scene.add(amb);
const pt = new THREE.PointLight(0x88f0ff, 0.8, 10);
pt.position.set(0, 1.5, 2.5);
scene.add(pt);

/* Group that holds disc + rings so we can tilt whole thing */
const group = new THREE.Group();
scene.add(group);

/* Profile disc (circular image) */
const loader = new THREE.TextureLoader();
const texture = loader.load(SETTINGS.pic, () => { renderer.render(scene, camera); });
texture.anisotropy = 4;

const discGeo = new THREE.CircleGeometry(1.0, 64);
const discMat = new THREE.MeshStandardMaterial({
  map: texture,
  metalness: 0.05,
  roughness: 0.35,
  side: THREE.DoubleSide
});
const disc = new THREE.Mesh(discGeo, discMat);
disc.scale.set(0.98, 0.98, 0.98); // slightly smaller than rings
group.add(disc);

/* subtle rounded rim behind disc for depth */
const rimGeo = new THREE.RingGeometry(1.02, 1.09, 64);
const rimMat = new THREE.MeshBasicMaterial({ color: 0x081028, transparent: true, opacity: 0.9 });
const rim = new THREE.Mesh(rimGeo, rimMat);
rim.rotation.x = Math.PI; // face it out
group.add(rim);

/* Build rings (tori) with additive glow-like materials */
const rings = [];
for (let i = 0; i < SETTINGS.ringCount; i++) {
  const r = SETTINGS.ringBaseRadius + i * SETTINGS.ringSpacing;
  const thickness = SETTINGS.ringThickness * (1 + i * 0.08);
  const torGeo = new THREE.TorusGeometry(r, thickness, 12, 240);

  // varying hue for layered neon
  const hue = SETTINGS.ringHueStart + i * 12;
  const color = new THREE.Color(`hsl(${hue}, 95%, ${45 - i*3}%)`);

  const mat = new THREE.MeshBasicMaterial({
    color: color,
    transparent: true,
    opacity: 0.55 - (i*0.06),
    blending: THREE.AdditiveBlending,
    depthWrite: false
  });

  const tor = new THREE.Mesh(torGeo, mat);

  // random slight tilt in 3D for each ring (gives depth)
  tor.rotation.x = (Math.random() * 0.6 - 0.3);
  tor.rotation.y = (Math.random() * 0.6 - 0.3);
  tor.rotation.z = Math.random() * Math.PI;

  // each ring will have its own speed offset and direction
  tor.userData = {
    baseSpeed: (Math.sign(Math.random() - 0.5) || 1) * (SETTINGS.baseSpeed * (0.6 + Math.random() * 1.4)),
    wobble: Math.random() * 0.015
  };

  group.add(tor);
  rings.push(tor);
}

/* small particle embers (optional tiny points for extra futuristic feel) */
const particleCount = 120;
const pos = new Float32Array(particleCount * 3);
for (let i = 0; i < particleCount; i++) {
  const a = Math.random() * Math.PI * 2;
  const rad = 1.15 + Math.random() * 1.35;
  pos[i * 3 + 0] = Math.cos(a) * rad;
  pos[i * 3 + 1] = (Math.random() - 0.5) * 0.8;
  pos[i * 3 + 2] = Math.sin(a) * rad;
}
const pg = new THREE.BufferGeometry();
pg.setAttribute('position', new THREE.BufferAttribute(pos, 3));
const pm = new THREE.PointsMaterial({ size: 0.012, transparent: true, opacity: 0.9, blending: THREE.AdditiveBlending });
pm.color = new THREE.Color(`hsl(${SETTINGS.ringHueStart + 30}, 90%, 65%)`);
const particles = new THREE.Points(pg, pm);
scene.add(particles);

/* Controls: we won't show orbit UI, but we use damped rotation by mouse */
let mouse = { x: 0, y: 0 };
let targetRotation = { x: 0, y: 0 };
let hover = false;
let lastClick = 0;

/* Interaction handlers */
function onMove(e) {
  const rect = renderer.domElement.getBoundingClientRect();
  const cx = rect.left + rect.width / 2;
  const cy = rect.top + rect.height / 2;
  const mx = (e.clientX - cx) / rect.width;
  const my = (e.clientY - cy) / rect.height;
  mouse.x = THREE.MathUtils.clamp(mx * 2, -1, 1);
  mouse.y = THREE.MathUtils.clamp(my * 2, -1, 1);
  targetRotation.y = mouse.x * 0.25;
  targetRotation.x = mouse.y * 0.18;
}

function onEnter() {
  hover = true;
  // subtle ring speed up
  rings.forEach(r => r.userData.speedMult = SETTINGS.hoverSpeedMult);
}
function onLeave() {
  hover = false;
  rings.forEach(r => r.userData.speedMult = 1);
  mouse.x = 0; mouse.y = 0;
  targetRotation.x = targetRotation.y = 0;
}

function onClick() {
  // pulse effect: briefly scale rings outward and increase particle alpha
  const now = performance.now();
  if (now - lastClick < 350) return; // debounce
  lastClick = now;
  // animate ring scale & particle alpha quickly
  const start = performance.now();
  const dur = 420;
  const initialScales = rings.map(r => r.scale.x);
  const initialOpacity = pm.opacity;
  function pulseFrame() {
    const t = (performance.now() - start) / dur;
    const ease = 1 - Math.pow(1 - Math.min(t,1), 3);
    const scale = 1 + 0.16 * (1 - Math.abs(Math.sin(ease * Math.PI)));
    rings.forEach((r, i) => {
      r.scale.setScalar(scale - i * 0.01);
      r.material.opacity = (0.55 - (i*0.06)) + 0.28 * (1 - t);
    });
    pm.opacity = initialOpacity + 0.7 * (1 - t);
    if (t < 1) requestAnimationFrame(pulseFrame);
    else {
      rings.forEach((r,i)=> r.scale.setScalar(1));
      pm.opacity = initialOpacity;
      rings.forEach((r,i)=> r.material.opacity = (0.55 - (i*0.06)));
    }
  }
  pulseFrame();
}

/* events */
renderer.domElement.addEventListener('mousemove', onMove);
renderer.domElement.addEventListener('mouseenter', onEnter);
renderer.domElement.addEventListener('mouseleave', onLeave);
renderer.domElement.addEventListener('click', onClick);

/* Responsive size set */
function setSize(px) {
  renderer.setSize(px, px);
  camera.aspect = 1;
  camera.updateProjectionMatrix();
}
setSize(SETTINGS.size);

/* Animation loop */
let last = performance.now();
function animate() {
  const now = performance.now();
  const dt = Math.min(60, now - last);
  last = now;

  // smooth group tilt toward targetRotation
  group.rotation.x += (targetRotation.x - group.rotation.x) * 0.08;
  group.rotation.y += (targetRotation.y - group.rotation.y) * 0.08;

  // rotate rings individually
  rings.forEach((r, idx) => {
    const u = r.userData;
    const mult = (u.speedMult || 1);
    r.rotation.z += u.baseSpeed * mult * dt * (1 + idx * 0.02);
    r.rotation.x += Math.sin(now * 0.0002 + idx) * (u.wobble * 0.001);
  });

  // tiny slow rotation for particles for ambient motion
  particles.rotation.y += 0.0007;

  renderer.render(scene, camera);
  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);

/* keep crisp on resize or if you want to change size later */
window.addEventListener('resize', () => {
  // keep square: use computed container size if it changes in layout
  const rect = container.getBoundingClientRect();
  const px = Math.min(rect.width, rect.height) || SETTINGS.size;
  setSize(px);
});

/* small helper: if you want to change ring color dynamically */
window.setRingColor = (hue) => {
  rings.forEach((r, i) => {
    const c = new THREE.Color(`hsl(${hue + i*10}, 95%, ${45 - i*3}%)`);
    r.material.color.copy(c);
  });
};
</script>

<!-- minimal style so it aligns well (optional) -->
<style>
  #ring-scene { display: inline-block; user-select: none; -webkit-user-select: none; }
  /* you already get a circular canvas via JS dom styling */
</style>
</script>
</body>
</html>
